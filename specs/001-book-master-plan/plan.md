# Implementation Plan: Book Master Plan

**Branch**: `001-book-master-plan` | **Date**: 2025-12-09 | **Spec**: [spec.md](./spec.md)
**Input**: Feature specification from `/specs/001-book-master-plan/spec.md`

**Note**: This plan is generated by the `/sp.plan` command following the clarification session.

## Summary

Implement a comprehensive Docusaurus-based textbook platform for Physical AI & Humanoid Robotics covering 5 modules (30 chapters, 13 weeks). The system includes hierarchical navigation, external quiz integration (Quizlet/Google Forms), Algolia DocSearch, homepage with module cards, downloadable code examples, hardware setup guides, and accessibility compliance (WCAG 2.1 Level AA).

**Primary Requirement**: Build a navigable, content-rich educational platform that delivers value incrementally per user story priority (P1 MVP: Navigate, Prerequisites, Code Examples ‚Üí P2: Diagrams, Exercises, Hardware ‚Üí P3: Search, Assessments).

**Technical Approach**: Use Docusaurus 3.0+ with React customization, Algolia DocSearch for search, external quiz platforms for assessments, GitHub Pages for deployment, and CI/CD pipeline for automated validation.

## Technical Context

**Language/Version**: JavaScript/TypeScript (Docusaurus 3.0+), Python 3.10+ (code examples, validation scripts), Markdown (content)
**Primary Dependencies**:
- **Frontend**: React 18+, Docusaurus 3.0+, @docusaurus/theme-mermaid, Mermaid.js
- **Search**: Algolia DocSearch (applied via https://docsearch.algolia.com/apply/)
- **Build**: Node.js 18+, npm/yarn
- **Code Examples**: ROS 2 Humble, Python 3.10+, Docker 24.0+
- **Validation**: markdownlint, ruff (Python linter), broken-link-checker

**Storage**: Static files (Markdown, images, code examples) in Git; no database
**Testing**:
- **Content**: markdownlint, frontmatter validation (YAML schema)
- **Code**: ruff (Python), pytest (validation scripts)
- **Build**: Docusaurus build (zero warnings), broken-link-checker
- **Accessibility**: axe DevTools, WAVE

**Target Platform**:
- **Deployment**: GitHub Pages (static hosting)
- **Students**: Modern browsers (Chrome 90+, Firefox 88+, Safari 14+, Edge 90+)
- **Mobile**: Responsive design (375px min-width)

**Project Type**: Documentation site (Docusaurus single-project structure)
**Performance Goals**:
- First Contentful Paint (FCP) < 1.5s
- Largest Contentful Paint (LCP) < 2.5s
- Time to Interactive (TTI) < 3.5s
- Lighthouse Performance Score > 90

**Constraints**:
- Build time < 5 minutes (SC-017)
- Zero broken links (SC-003, enforced by CI/CD)
- WCAG 2.1 Level AA compliance (FR-032, SC-018)
- All code examples tested on Ubuntu 22.04 + ROS 2 Humble (Constitution Principle 1)

**Scale/Scope**:
- **Content**: 30+ chapters, 100+ code examples, 50+ diagrams
- **Users**: Self-paced students (no concurrent user limits for static site)
- **Search**: Algolia free tier (10k requests/month, sufficient for educational project)

---

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

Constitution gates for Physical AI & Humanoid Robotics textbook project (Constitution v3.0.0):

### Principle 1: Content Accuracy & Technical Rigor
- **Code Verification**: All ROS 2, Gazebo, Isaac examples tested on Ubuntu 22.04 + Humble (enforced by CI/CD)
- **Simulation Accuracy**: Version specifications documented in chapter frontmatter and code headers
- **Hardware Specifications**: Hardware guide includes 3 tiers with exact model numbers, costs, cloud alternatives
- **Mathematical Rigor**: Glossary defines notation; equations reference coordinate frames
- **Citations**: External links to official ROS 2 Humble docs, Isaac docs, research papers (IEEE format)
- **Safety**: Hardware deployment code includes "SAFETY WARNING" comment blocks

**Status**: ‚úÖ PASS - Requirements align with constitution. CI/CD pipeline enforces code testing.

### Principle 2: Educational Clarity & Accessibility
- **Learning Structure**: Every chapter has frontmatter with prerequisites, learning_outcomes, estimated_time
- **Multi-Modal**: Text + Mermaid diagrams + code examples + practical exercises per chapter
- **Adaptive Content**: `[PERSONALIZATION_POINT]` and `[URDU_TRANSLATION_TOGGLE]` markers supported
- **Troubleshooting**: Each chapter includes troubleshooting section with Issue/Cause/Solution format
- **Assessments**: External quiz platforms (Quizlet, Google Forms) embedded via iframe per chapter

**Status**: ‚úÖ PASS - Chapter frontmatter template enforces structure. WCAG 2.1 AA compliance verified by axe DevTools.

### Principle 3: Consistency & Standards
- **Terminology**: Glossary page (FR-021) with canonical terms; automated checker in CI/CD
- **Code Style**: Python PEP 8 + ROS 2 style (enforced by ruff linter)
- **File Naming**: Chapters: `module-X-chapter-Y.md`; Code: `mX-cY-description.py`
- **Markdown**: CommonMark spec (enforced by markdownlint)
- **Versions**: Locked in frontmatter and code comments (Ubuntu 22.04, ROS 2 Humble, Python 3.10+)

**Status**: ‚úÖ PASS - Automated linting enforces consistency. Glossary prevents terminology drift.

### Principle 4: Lab & Hardware Guidelines
- **Hardware Documentation**: `hardware-guide.md` with 3 tabs (Local/Cloud/Budget), FR-012
- **Workstation Requirements**: Minimum spec validated on RTX 3060, 32GB RAM, Ubuntu 22.04
- **Physical AI Edge Kit**: Jetson Orin Nano + RealSense D435i documentation with validation scripts
- **Safety Protocols**: Emergency stop, workspace boundaries, power safety in physical robot chapters
- **Simulation-First**: All labs testable in Gazebo/Isaac Sim before hardware deployment

**Status**: ‚úÖ PASS - Hardware guide includes validation scripts. Cloud alternatives documented per module.

### Principle 5: Docusaurus Structure & Quality
- **File Structure**: `docs/`, `static/`, `src/components/` organized by module (see Project Structure section)
- **Frontmatter**: 10 required fields validated by JSON schema (FR-006-NEW, FR-007)
- **Cross-References**: Relative links with context; broken-link-checker in CI/CD
- **Code Blocks**: Language tags for syntax highlighting; download links to `static/code/`
- **Interactive Diagrams**: Mermaid enabled; alt text required for accessibility
- **Search**: Algolia DocSearch with contextual search and version filtering
- **Versioning**: Docusaurus versions feature enabled (FR-029)
- **Accessibility**: WCAG 2.1 Level AA (axe DevTools audit in CI/CD)

**Status**: ‚úÖ PASS - Docusaurus config aligns with requirements. Algolia application submitted.

### Principle 6: Code & Simulation Quality
- **Code Completeness**: Docstrings, inline comments, type hints, requirements.txt for all examples
- **ROS 2 Packages**: package.xml, setup.py, launch/, config/, test/ included
- **Simulation Specs**: Gazebo version, physics engine, sensor noise in YAML comments
- **Error Handling**: Parameter validation, graceful shutdown, QoS mismatch warnings in nodes
- **Safety for Physical Robots**: Emergency stop topic, watchdog timers, joint limit enforcement
- **Docker**: Base images (osrf/ros:humble-desktop-full, nvidia/isaac-sim:2023.1.1) with pinned deps
- **Testing**: CI/CD runs code examples in Docker; validation scripts test student submissions

**Status**: ‚úÖ PASS - Code quality enforced by ruff linter + manual review. Docker containers ensure reproducibility.

---

## Project Structure

### Documentation (this feature)

```text
specs/001-book-master-plan/
‚îú‚îÄ‚îÄ plan.md              # This file (/sp.plan command output)
‚îú‚îÄ‚îÄ research.md          # Phase 0 output (technology decisions)
‚îú‚îÄ‚îÄ data-model.md        # Phase 1 output (entity definitions)
‚îú‚îÄ‚îÄ quickstart.md        # Phase 1 output (developer onboarding)
‚îú‚îÄ‚îÄ contracts/           # Phase 1 output (schemas and types)
‚îÇ   ‚îú‚îÄ‚îÄ chapter-frontmatter.schema.json
‚îÇ   ‚îú‚îÄ‚îÄ sidebar-structure.ts
‚îÇ   ‚îú‚îÄ‚îÄ module-card.interface.ts
‚îÇ   ‚îî‚îÄ‚îÄ hardware-config.schema.json
‚îî‚îÄ‚îÄ spec.md             # Feature specification (already exists)
```

### Source Code (repository root)

```text
ai-and-humanoid-robotics-hackathon/
‚îú‚îÄ‚îÄ docs/                              # All content pages
‚îÇ   ‚îú‚îÄ‚îÄ intro.md                       # Homepage with module cards (FR-006-NEW)
‚îÇ   ‚îú‚îÄ‚îÄ module-0-getting-started/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _category_.json            # Sidebar config
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chapter-0-1.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chapter-0-2.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ chapter-0-3.md
‚îÇ   ‚îú‚îÄ‚îÄ module-1-ros2/
‚îÇ   ‚îú‚îÄ‚îÄ module-2-digital-twin/
‚îÇ   ‚îú‚îÄ‚îÄ module-3-isaac/
‚îÇ   ‚îú‚îÄ‚îÄ module-4-vla/
‚îÇ   ‚îú‚îÄ‚îÄ module-5-capstone/
‚îÇ   ‚îú‚îÄ‚îÄ hardware-guide.md              # FR-012: 3-tier setup guide
‚îÇ   ‚îú‚îÄ‚îÄ glossary.md                    # FR-022: Technical terms
‚îÇ   ‚îú‚îÄ‚îÄ instructor-guide.md            # FR-027: Teaching resources
‚îÇ   ‚îî‚îÄ‚îÄ changelog.md                   # FR-031: Version history
‚îÇ
‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îú‚îÄ‚îÄ img/                           # Diagrams organized by module
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ module-1/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ module-2/
‚îÇ   ‚îú‚îÄ‚îÄ code/                          # FR-016: Downloadable code examples
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ module-1/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m1-c2-publisher.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ m1-c4-humanoid.urdf.xacro
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ module-2/
‚îÇ   ‚îî‚îÄ‚îÄ validation-scripts/            # FR-019: Exercise validation
‚îÇ       ‚îú‚îÄ‚îÄ validate-1-4-urdf.py
‚îÇ       ‚îî‚îÄ‚îÄ validate-2-2-gazebo.py
‚îÇ
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ InteractiveDiagram.js     # Mermaid wrapper
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CodeDownloadButton.js     # FR-010: Download links
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HardwareRequirement.js    # FR-014: Hardware tier badge
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ModuleCard.js             # FR-006-NEW: Homepage cards
‚îÇ   ‚îî‚îÄ‚îÄ css/
‚îÇ       ‚îî‚îÄ‚îÄ custom.css                 # Theme customization
‚îÇ
‚îú‚îÄ‚îÄ sidebars.js                        # FR-001: Hierarchical navigation
‚îú‚îÄ‚îÄ docusaurus.config.js               # Main config (Algolia, versioning)
‚îú‚îÄ‚îÄ package.json                       # npm dependencies
‚îú‚îÄ‚îÄ .github/workflows/
‚îÇ   ‚îî‚îÄ‚îÄ deploy.yml                     # CI/CD: build, test, deploy
‚îÇ
‚îî‚îÄ‚îÄ specs/001-book-master-plan/       # This planning documentation
```

**Structure Decision**: Single Docusaurus project (not web app with frontend/backend separation). All content is Markdown in `docs/`, React components in `src/components/` for custom UI elements (module cards, code download buttons), static assets in `static/`. This aligns with Docusaurus best practices for documentation sites.

---

## Complexity Tracking

> **No constitution violations requiring justification**

All requirements align with Physical AI & Humanoid Robotics Constitution v3.0.0. No complexity budget exceeded. The project uses standard Docusaurus patterns with minimal custom components.

---

## Phase 0: Research & Technology Validation

**Purpose**: Resolve all technology unknowns, validate Algolia DocSearch feasibility, research homepage dashboard patterns, investigate quiz platform embeds, validate JSON schema for frontmatter.

**Duration**: 1-2 days

**Prerequisites**: None

**Outputs**: `research.md` with documented decisions

### Research Tasks

**R0.1: Docusaurus 3.0 + React 18 Integration**
- **Question**: How to build custom React components (ModuleCard, HardwareRequirement) within Docusaurus 3.0?
- **Research**: Review Docusaurus docs on swizzling, custom components, and theme configuration
- **Decision Target**: Component architecture pattern, directory structure for `src/components/`
- **References**: https://docusaurus.io/docs/swizzling, https://docusaurus.io/docs/markdown-features/react

**R0.2: Algolia DocSearch Application & Configuration**
- **Question**: What is the approval timeline for Algolia DocSearch free tier? How to configure ranking rules for glossary priority (FR-020)?
- **Research**: Review DocSearch application process, explore Algolia dashboard for ranking configuration
- **Decision Target**: Application checklist, estimated approval time, ranking rule configuration strategy
- **References**: https://docsearch.algolia.com/docs/who-can-apply, Algolia dashboard docs

**R0.3: External Quiz Platform Embedding**
- **Question**: Which quiz platforms support iframe embedding with immediate feedback? How to handle CORS and iframe security?
- **Research**: Test Google Forms, Quizlet, Kahoot, Microsoft Forms for iframe compatibility
- **Decision Target**: Recommended platform(s) with embedding code templates
- **References**: Google Forms embed docs, Quizlet embed API, iframe security best practices

**R0.4: Homepage Module Cards Design Pattern**
- **Question**: Best practice for displaying 5 module cards with icons, week ranges, and CTAs on Docusaurus homepage?
- **Research**: Survey Docusaurus showcase sites for dashboard patterns; review Tailwind CSS / custom CSS approaches
- **Decision Target**: Component structure for ModuleCard.js, CSS Grid vs Flexbox layout, responsive breakpoints
- **References**: Docusaurus showcase (https://docusaurus.io/showcase), Material Design card patterns

**R0.5: Frontmatter Validation with JSON Schema**
- **Question**: How to enforce 10 required frontmatter fields (FR-007) during build? Can Docusaurus validate YAML frontmatter against JSON schema?
- **Research**: Investigate Docusaurus plugin ecosystem, remark/rehype plugins for frontmatter validation
- **Decision Target**: Validation approach (pre-commit hook, CI/CD check, Docusaurus plugin)
- **References**: docusaurus-plugin-content-docs API, remark-frontmatter, ajv JSON schema validator

**R0.6: Mermaid Diagram Rendering & Accessibility**
- **Question**: Does @docusaurus/theme-mermaid support alt text for diagrams? How to ensure WCAG compliance?
- **Research**: Test Mermaid accessibility features, investigate aria-label injection for SVG outputs
- **Decision Target**: Accessibility strategy for Mermaid diagrams (alt text, aria-labels, fallback text)
- **References**: @docusaurus/theme-mermaid docs, Mermaid accessibility guide

**R0.7: Broken Link Checker in CI/CD**
- **Question**: Best tool for detecting broken internal/external links in Docusaurus build? How to integrate with GitHub Actions?
- **Research**: Compare broken-link-checker (npm), linkinator, lychee (Rust), htmltest
- **Decision Target**: Tool selection with GitHub Actions workflow example
- **References**: broken-link-checker (https://github.com/stevenvachon/broken-link-checker), GitHub Actions marketplace

**R0.8: Code Example Download Button Implementation**
- **Question**: How to add download buttons below code blocks that link to `static/code/` files?
- **Research**: Investigate Docusaurus code block features, custom remark/rehype plugins, React component injection
- **Decision Target**: Implementation approach (custom component, MDX, or plugin)
- **References**: Docusaurus code blocks guide, MDX integration, remark-code-extra

**Output Format** (in research.md):

```markdown
## Research Decision: [Topic]

**Question**: [What we needed to know]

**Research Conducted**: [Sources reviewed, tests performed]

**Decision**: [What was chosen]

**Rationale**: [Why this approach]

**Alternatives Considered**: [Other options and why rejected]

**Implementation Notes**: [Key details for Phase 1]

**References**: [Links to documentation]
```

---

## Phase 0.5: Prototyping & Validation (Optional Spike)

**Purpose**: Validate critical unknowns through hands-on prototyping before committing to full implementation.

**Duration**: 1-2 days

**Prerequisites**: Phase 0 research complete

**When to Run**: If research reveals high-risk unknowns (e.g., Algolia ranking rules unclear, quiz embed security issues, frontmatter validation complex).

**Outputs**: Proof-of-concept code, validation reports

### Spike Tasks (Conditional)

**S0.1: Algolia Search Prototype** (IF approved for DocSearch)
- Create minimal Docusaurus site with Algolia credentials
- Test search relevance with sample chapters and glossary entries
- Configure ranking rules for glossary priority
- Validate contextual search and version filtering
- **Success Criteria**: Glossary term appears first for acronym search (e.g., "QoS" ‚Üí glossary, then chapters)

**S0.2: Quiz Platform Embed Test**
- Create sample Google Form and Quizlet quiz
- Embed in Markdown page via iframe
- Test immediate feedback, retry functionality
- Verify iframe security (Content-Security-Policy headers)
- **Success Criteria**: Quiz loads, submits, shows score without console errors

**S0.3: Module Cards Component Prototype**
- Build ModuleCard.js React component
- Render 5 cards on test homepage with mock data
- Test responsive behavior (mobile 375px, tablet 768px, desktop 1024px+)
- Validate accessibility (keyboard navigation, screen reader)
- **Success Criteria**: Cards render correctly, pass axe DevTools audit (zero critical violations)

**S0.4: Frontmatter Validation Script**
- Write Node.js script to parse chapter frontmatter
- Validate against JSON schema (10 required fields)
- Test on sample chapter Markdown files
- Integrate with pre-commit hook (husky) or GitHub Actions
- **Success Criteria**: Invalid frontmatter blocks commit/build with clear error message

---

## Phase 1: Design Artifacts & Contracts

**Purpose**: Produce detailed design documents, data models, API contracts, and developer quickstart guide.

**Duration**: 2-3 days

**Prerequisites**: Phase 0 research complete, Phase 0.5 (if run) validated

**Outputs**: data-model.md, contracts/*.json, contracts/*.ts, quickstart.md

### D1.1: Data Model Design (`data-model.md`)

**Purpose**: Define all entities with attributes, relationships, validation rules

**Entities to Document** (from spec.md Key Entities section):

1. **Module**: module_id, title, week_range, description, hardware_tier_required, chapters[]
2. **Chapter**: chapter_id, title, sidebar_label, sidebar_position, estimated_time_minutes, prerequisites[], learning_outcomes[], keywords[], content_markdown, hardware_tier
3. **Part**: part_id, heading_level, title, content_markdown (belongs to Chapter)
4. **Hardware Configuration**: config_id, name, tier (Proxy/Miniature/Premium), components[], cost_usd, setup_guide_link
5. **Code Example**: example_id, filename, language, module_id, chapter_id, description, file_path, requirements[]
6. **Practical Exercise**: exercise_id, title, chapter_id, instructions_markdown, validation_script_path, estimated_time_minutes, difficulty
7. **Assessment Checkpoint**: assessment_id, chapter_id, platform_type (Quizlet/Google Forms), embed_url, passing_score_percentage
8. **Glossary Term**: term_id, term, acronym, definition, context, related_terms[], urdu_translation
9. **Reference**: reference_id, title, url, type (Official Docs/Research Paper), access_date

**Format**:

```markdown
## Entity: [Name]

**Purpose**: [What this entity represents]

**Attributes**:
- `field_name` (type, required/optional): Description
- Example: `chapter_id` (string, required): Unique identifier in format "module-X-chapter-Y"

**Validation Rules**:
- [Rule 1: e.g., "sidebar_position must be numeric and unique within module"]
- [Rule 2: e.g., "prerequisites must reference valid chapter_ids or external resources"]

**Relationships**:
- Belongs to: [Parent entity]
- Contains: [Child entities]
- References: [Related entities]

**State Transitions** (if applicable):
- [State 1 ‚Üí State 2 via Action]

**Implementation Notes**:
- Frontmatter representation (YAML)
- File storage location
- Access patterns (how data is queried/rendered)
```

**Traceability**: Link each entity to functional requirements and success criteria.

### D1.2: Contract Generation (`contracts/`)

**Purpose**: Define schemas and TypeScript interfaces for type safety and validation

**C1.2.1: Chapter Frontmatter JSON Schema** (`chapter-frontmatter.schema.json`)

Validates YAML frontmatter in chapter Markdown files (FR-007).

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Chapter Frontmatter",
  "description": "Validation schema for chapter YAML frontmatter (FR-007)",
  "type": "object",
  "required": [
    "id",
    "title",
    "sidebar_label",
    "sidebar_position",
    "description",
    "keywords",
    "estimated_time",
    "prerequisites",
    "learning_outcomes",
    "hardware_tier"
  ],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^module-[0-5]-chapter-[0-9]+$",
      "description": "Unique chapter ID in format module-X-chapter-Y"
    },
    "title": {
      "type": "string",
      "minLength": 10,
      "maxLength": 100,
      "description": "Full chapter title displayed at top of page"
    },
    "sidebar_label": {
      "type": "string",
      "minLength": 5,
      "maxLength": 50,
      "description": "Shortened label for sidebar navigation (format: 'X.Y Short Title')"
    },
    "sidebar_position": {
      "type": "integer",
      "minimum": 1,
      "description": "Numeric position within module (1, 2, 3...)"
    },
    "description": {
      "type": "string",
      "minLength": 50,
      "maxLength": 160,
      "description": "SEO-optimized summary (150-160 characters)"
    },
    "keywords": {
      "type": "array",
      "items": {
        "type": "string",
        "minLength": 2
      },
      "minItems": 3,
      "maxItems": 10,
      "description": "Searchable terms for Algolia indexing"
    },
    "estimated_time": {
      "type": "integer",
      "minimum": 15,
      "maximum": 180,
      "description": "Minutes to complete chapter (reading + exercises)"
    },
    "prerequisites": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Array of prerequisite chapter IDs or external concepts"
    },
    "learning_outcomes": {
      "type": "array",
      "items": {
        "type": "string",
        "minLength": 20
      },
      "minItems": 3,
      "maxItems": 5,
      "description": "Measurable learning objectives (3-5 bullet points)"
    },
    "hardware_tier": {
      "type": "string",
      "enum": ["proxy", "miniature", "premium"],
      "description": "Required hardware setup (proxy=simulation, miniature=$1.5k-2k, premium=$90k+)"
    }
  },
  "additionalProperties": false
}
```

**C1.2.2: Sidebar Structure TypeScript Interface** (`sidebar-structure.ts`)

Defines type-safe sidebar configuration (FR-001).

```typescript
/**
 * Sidebar structure for Docusaurus textbook (FR-001)
 * Defines hierarchical navigation for 5 modules with collapsible sections
 */

export interface SidebarItem {
  type: 'doc' | 'category';
  id?: string;  // Required if type='doc'
  label: string;
  collapsible?: boolean;  // Default true for categories
  collapsed?: boolean;    // Default false for Module 0, true for others
  items?: string[] | SidebarItem[];  // Chapter IDs or nested categories
}

export interface TextbookSidebar {
  textbookSidebar: SidebarItem[];
}

/**
 * Example usage:
 *
 * const sidebar: TextbookSidebar = {
 *   textbookSidebar: [
 *     { type: 'doc', id: 'intro', label: 'üè† Home' },
 *     {
 *       type: 'category',
 *       label: 'Module 0: Getting Started (Weeks 1-2)',
 *       collapsible: true,
 *       collapsed: false,
 *       items: [
 *         'module-0-getting-started/chapter-0-1',
 *         'module-0-getting-started/chapter-0-2',
 *         'module-0-getting-started/chapter-0-3',
 *       ],
 *     },
 *     // ... more modules
 *   ],
 * };
 */
```

**C1.2.3: Module Card Interface** (`module-card.interface.ts`)

Defines props for ModuleCard component (FR-006-NEW).

```typescript
/**
 * Module Card component props for homepage (FR-006-NEW)
 * Displays module overview with title, duration, hardware tier, and CTA
 */

export interface ModuleCardProps {
  moduleId: number;  // 0-5
  title: string;  // e.g., "Module 1: ROS 2 Fundamentals"
  weekRange: string;  // e.g., "Weeks 3-5"
  description: string;  // Brief summary (100-150 chars)
  hardwareTier: 'none' | 'proxy' | 'miniature' | 'premium';
  icon: string;  // SVG icon name or emoji
  chapterCount: number;  // Number of chapters in module
  ctaLink: string;  // Link to first chapter (e.g., "/module-1-ros2/chapter-1-1")
  ctaText?: string;  // Default: "Get Started"
}

/**
 * Example usage:
 *
 * <ModuleCard
 *   moduleId={1}
 *   title="Module 1: ROS 2 Fundamentals"
 *   weekRange="Weeks 3-5"
 *   description="Master ROS 2 for building distributed robotic systems"
 *   hardwareTier="proxy"
 *   icon="ü§ñ"
 *   chapterCount={6}
 *   ctaLink="/module-1-ros2/chapter-1-1"
 * />
 */
```

**C1.2.4: Hardware Configuration Schema** (`hardware-config.schema.json`)

Validates hardware setup configurations (FR-012-014).

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Hardware Configuration",
  "description": "Validation schema for hardware setup tiers (FR-012)",
  "type": "object",
  "required": ["config_id", "name", "tier", "components", "cost_usd"],
  "properties": {
    "config_id": {
      "type": "string",
      "pattern": "^hw-[a-z0-9-]+$",
      "description": "Unique hardware config ID (e.g., hw-digital-twin-workstation)"
    },
    "name": {
      "type": "string",
      "description": "Display name (e.g., 'Digital Twin Workstation')"
    },
    "tier": {
      "type": "string",
      "enum": ["proxy", "miniature", "premium"],
      "description": "Hardware tier classification"
    },
    "components": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["type", "spec", "cost"],
        "properties": {
          "type": { "type": "string", "description": "Component type (GPU, CPU, RAM, etc.)" },
          "spec": { "type": "string", "description": "Specification (e.g., 'NVIDIA RTX 3060 12GB')" },
          "cost": { "type": "number", "minimum": 0, "description": "USD cost" }
        }
      },
      "minItems": 1
    },
    "cost_usd": {
      "type": "number",
      "minimum": 0,
      "description": "Total cost in USD"
    },
    "setup_guide_link": {
      "type": "string",
      "format": "uri-reference",
      "description": "Relative link to setup guide (e.g., '/hardware-guide#digital-twin')"
    }
  }
}
```

### D1.3: Quickstart Guide (`quickstart.md`)

**Purpose**: Developer onboarding guide for setting up local Docusaurus environment, building content, running validation checks.

**Sections**:

1. **Prerequisites**:
   - Node.js 18+ (check: `node --version`)
   - npm 8+ or yarn 1.22+ (check: `npm --version`)
   - Git 2.34+ (check: `git --version`)
   - (Optional) Docker 24.0+ for code example testing

2. **Initial Setup**:
   ```bash
   # Clone repository
   git clone https://github.com/your-org/ai-and-humanoid-robotics-hackathon.git
   cd ai-and-humanoid-robotics-hackathon

   # Install dependencies
   npm install  # or: yarn install

   # Start local dev server
   npm start  # or: yarn start
   # Opens http://localhost:3000
   ```

3. **Project Structure Overview**:
   - `docs/`: All Markdown content (modules, chapters, guides)
   - `static/`: Images, code examples, validation scripts
   - `src/components/`: Custom React components
   - `sidebars.js`: Navigation configuration
   - `docusaurus.config.js`: Main Docusaurus settings

4. **Creating a New Chapter**:
   ```bash
   # Example: Create Chapter 1.7 in Module 1
   touch docs/module-1-ros2/chapter-1-7.md
   ```

   - Copy frontmatter template from existing chapter
   - Update required fields (id, title, sidebar_label, sidebar_position, etc.)
   - Add to `sidebars.js` under appropriate module category
   - Write content following constitution guidelines

5. **Adding Code Examples**:
   ```bash
   # Example: Add publisher example for Module 1 Chapter 2
   mkdir -p static/code/module-1
   touch static/code/module-1/m1-c2-publisher.py
   ```

   - Include docstring, type hints, inline comments
   - Add requirements.txt or package.xml
   - Reference in chapter with download link:
     ```markdown
     [Download: m1-c2-publisher.py](pathname:///code/module-1/m1-c2-publisher.py)
     ```

6. **Validation Checks**:
   ```bash
   # Markdown linting
   npm run lint:markdown

   # Frontmatter validation
   npm run validate:frontmatter

   # Build check (zero warnings)
   npm run build

   # Broken link check (after build)
   npm run check:links

   # Accessibility audit (requires build)
   npm run audit:a11y
   ```

7. **Running Code Examples**:
   ```bash
   # Test Python code examples
   cd static/code/module-1
   python3 m1-c2-publisher.py

   # OR use Docker for ROS 2 environment
   docker run -v $(pwd):/workspace osrf/ros:humble-desktop-full \
     bash -c "cd /workspace && python3 m1-c2-publisher.py"
   ```

8. **Deployment**:
   - Automatic: Push to `main` branch triggers GitHub Actions ‚Üí deploys to GitHub Pages
   - Manual: `npm run build && npm run serve` to test production build locally

9. **Common Issues**:
   - **Build fails with "Cannot find module"**: Run `npm install` to ensure dependencies installed
   - **Broken links detected**: Check relative link syntax, ensure referenced files exist
   - **Frontmatter validation fails**: Verify all 10 required fields present and valid against schema

10. **Resources**:
    - Docusaurus docs: https://docusaurus.io/docs
    - Project constitution: `.specify/memory/constitution.md`
    - Spec: `specs/001-book-master-plan/spec.md`
    - Plan: `specs/001-book-master-plan/plan.md` (this file)

---

## Phase 2: Implementation Phases (for /sp.tasks)

**Note**: Detailed task breakdown will be generated by `/sp.tasks` command. This section provides high-level implementation phases for planning context.

### Phase 2.0: Foundational Setup (Blocks all features)

**Purpose**: Initialize Docusaurus project, configure build pipeline, establish validation infrastructure

**Tasks** (high-level):
- T001: Initialize Docusaurus 3.0 project with `create-docusaurus`
- T002: Configure `docusaurus.config.js` (site metadata, navbar, footer, Mermaid theme)
- T003: Set up GitHub Actions workflow for CI/CD (build, test, deploy)
- T004: Create frontmatter validation script with JSON schema
- T005: Configure markdownlint, broken-link-checker
- T006: Create `sidebars.js` with 5 module structure (FR-001)
- T007: Apply for Algolia DocSearch (submit application)

**Completion Checkpoint**: `npm run build` succeeds with zero warnings, CI/CD pipeline runs successfully

### Phase 2.1: Homepage & Navigation (User Story 1 - P1 MVP)

**Purpose**: Implement homepage with module cards, sidebar navigation, breadcrumbs

**Tasks**:
- T008: Create `ModuleCard.js` React component with props interface
- T009: Implement `intro.md` homepage with 5 module cards (FR-006-NEW)
- T010: Style module cards (responsive grid, hardware tier icons)
- T011: Configure sidebar collapsible categories (FR-004)
- T012: Implement breadcrumb navigation (FR-002)
- T013: Add Next/Previous chapter links (FR-003)
- T014: Test navigation flow (User Story 1 acceptance scenarios)

**Completion Checkpoint**: Homepage renders, sidebar navigates, breadcrumbs functional, passes axe DevTools audit

### Phase 2.2: Chapter Template & Content Delivery (User Story 2 - P1 MVP)

**Purpose**: Create chapter frontmatter template, prerequisites/learning outcomes sections

**Tasks**:
- T015: Define chapter frontmatter template with 10 required fields
- T016: Create sample Chapter 0.1 (Welcome & Course Overview)
- T017: Implement prerequisites section with hyperlinks
- T018: Implement learning outcomes section (3-5 bullets)
- T019: Add estimated time indicator
- T020: Validate frontmatter with JSON schema in pre-commit hook

**Completion Checkpoint**: Chapter template validated, prerequisites link correctly, frontmatter passes schema validation

### Phase 2.3: Code Examples & Downloads (User Story 3 - P1 MVP)

**Purpose**: Add downloadable code examples, validation scripts

**Tasks**:
- T021: Create `CodeDownloadButton.js` component
- T022: Add sample Python code example (m1-c2-publisher.py)
- T023: Include docstring, type hints, requirements.txt
- T024: Add download links in chapter Markdown
- T025: Create validation script (validate-1-4-urdf.py)
- T026: Test code example execution in Docker (ROS 2 Humble)

**Completion Checkpoint**: Code downloads work, examples run successfully, validation scripts provide pass/fail feedback

### Phase 2.4: Diagrams & Visualizations (User Story 4 - P2)

**Purpose**: Enable Mermaid diagrams, ensure accessibility

**Tasks**:
- T027: Configure `@docusaurus/theme-mermaid` plugin
- T028: Create sample Mermaid diagram (ROS 2 computational graph)
- T029: Add alt text for accessibility
- T030: Test diagram rendering on mobile (375px)
- T031: Validate WCAG 2.1 compliance with axe DevTools

**Completion Checkpoint**: Mermaid renders, alt text present, passes accessibility audit

### Phase 2.5: Practical Exercises (User Story 5 - P2)

**Purpose**: Add step-by-step exercises with validation

**Tasks**:
- T032: Create exercise template (numbered steps, validation checklist)
- T033: Implement sample exercise (Chapter 1.5: Create URDF)
- T034: Add troubleshooting section with Issue/Cause/Solution format
- T035: Test validation script execution

**Completion Checkpoint**: Exercise completes, validation script provides feedback, troubleshooting section helps resolve errors

### Phase 2.6: Hardware Setup Guide (User Story 6 - P2)

**Purpose**: Document 3 hardware tiers with validation scripts

**Tasks**:
- T036: Create `hardware-guide.md` with tab structure (Local/Cloud/Budget)
- T037: Document Digital Twin Workstation setup (RTX 3060+)
- T038: Document Cloud GPU setup (AWS g5.xlarge)
- T039: Document Budget Alternative (simulation-only)
- T040: Create validation script (check-system.sh) for CUDA, ROS 2, Gazebo, Docker

**Completion Checkpoint**: Hardware guide complete, validation scripts check system readiness, cloud setup works on AWS/GCP

### Phase 2.7: Search Integration (User Story 7 - P3)

**Purpose**: Configure Algolia DocSearch, test search relevance

**Tasks**:
- T041: Receive Algolia credentials (post-approval)
- T042: Add credentials to `docusaurus.config.js`
- T043: Configure contextual search and version filtering
- T044: Configure ranking rules (glossary priority, FR-020)
- T045: Test search queries (User Story 7 acceptance scenarios)
- T046: Verify 90% of queries return relevant results in top 3 (SC-013)

**Completion Checkpoint**: Search functional, glossary terms appear first for acronyms, contextual search filters by version

### Phase 2.8: Assessment Checkpoints (User Story 8 - P3)

**Purpose**: Embed external quizzes (Quizlet, Google Forms)

**Tasks**:
- T047: Create sample Google Form quiz (Chapter 1.2: ROS 2 Architecture)
- T048: Embed quiz via iframe in chapter Markdown
- T049: Test quiz submission and feedback
- T050: Verify iframe security (Content-Security-Policy headers)
- T051: Document quiz creation process in instructor guide

**Completion Checkpoint**: Quiz loads, submits, shows score, no security warnings

### Phase 2.9: Glossary & Resources (Supporting Features)

**Purpose**: Create glossary page, instructor guide, changelog

**Tasks**:
- T052: Create `glossary.md` with 50 initial terms (FR-021)
- T053: Add term definitions (ROS 2, VSLAM, URDF, etc.) with Urdu translations
- T054: Link glossary terms back to chapters (FR-022)
- T055: Create `instructor-guide.md` (FR-027)
- T056: Add solution keys for exercises, grading rubrics
- T057: Create `changelog.md` (FR-031) with version history

**Completion Checkpoint**: Glossary complete, terms link to chapters, instructor guide has solution keys

### Phase 2.10: Polish & Deployment (Cross-Cutting)

**Purpose**: Final validation, performance optimization, deployment

**Tasks**:
- T058: Run full CI/CD pipeline (build, lint, link check, accessibility audit)
- T059: Optimize images (compress, convert to WebP)
- T060: Test Lighthouse performance (target: >90 score)
- T061: Verify WCAG 2.1 Level AA compliance (SC-018)
- T062: Deploy to GitHub Pages
- T063: Verify deployment (check links, search, navigation)

**Completion Checkpoint**: All CI/CD checks pass, Lighthouse score >90, site deployed and functional

---

## Validation & Quality Gates

### Pre-Commit Validation

**Enforced by Husky pre-commit hook**:
- [x] Markdown linting (markdownlint)
- [x] Frontmatter validation (JSON schema check)
- [x] Python linting (ruff) for code examples
- [x] No TODO/FIXME comments in committed code

### CI/CD Pipeline (GitHub Actions)

**Runs on every push to feature branch and main**:

```yaml
name: Build and Deploy

on:
  push:
    branches: [main, 001-book-master-plan]
  pull_request:
    branches: [main]

jobs:
  build-and-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Lint Markdown
        run: npm run lint:markdown

      - name: Validate frontmatter
        run: npm run validate:frontmatter

      - name: Build Docusaurus
        run: npm run build
        # Fails if any warnings (onBrokenLinks: 'throw')

      - name: Check broken links
        run: npm run check:links

      - name: Accessibility audit
        run: npm run audit:a11y

      - name: Test code examples (Python)
        run: |
          docker run -v $(pwd)/static/code:/code osrf/ros:humble-desktop-full \
            bash -c "cd /code && python3 -m ruff check ."

      - name: Lighthouse CI
        uses: treosh/lighthouse-ci-action@v9
        with:
          urls: |
            http://localhost:3000
          uploadArtifacts: true
          temporaryPublicStorage: true

  deploy:
    needs: build-and-test
    if: github.ref == 'refs/heads/main'
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'
      - run: npm ci
      - run: npm run build
      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./build
```

### Manual Quality Gates

**Before merging to main**:
- [ ] Pilot test with 3-5 beta students (collect feedback)
- [ ] Manual review of sample chapter by SME (subject matter expert)
- [ ] Verify all user story acceptance scenarios (8 stories, ~40 scenarios)
- [ ] Confirm Algolia search approved and functional
- [ ] Test on real hardware (RTX 3060 workstation, Jetson Orin Nano)

---

## Dependencies & Risks

### External Dependencies

| Dependency | Type | Risk Level | Mitigation |
|------------|------|------------|------------|
| **Algolia DocSearch** | Search platform (free tier) | MEDIUM | Application pending; fallback to local search plugin (docusaurus-search-local) if rejected |
| **GitHub Pages** | Hosting | LOW | Free for public repos; alternative: Netlify, Vercel |
| **Google Forms / Quizlet** | Quiz platform | LOW | Multiple alternatives available (Microsoft Forms, Kahoot); can build custom React quiz component if needed |
| **ROS 2 Humble** | Code examples dependency | LOW | Locked version, Docker ensures reproducibility |
| **NVIDIA Isaac Sim** | Advanced examples | MEDIUM | Cloud alternative (AWS g5.xlarge) documented; simulation-only fallback available |

### Technical Risks

**R1: Algolia DocSearch Approval Delay**
- **Probability**: MEDIUM (1-4 week approval time)
- **Impact**: HIGH (blocks User Story 7 - Search)
- **Mitigation**: Apply immediately; use local search plugin as interim solution; glossary still functional via page search (Ctrl+F)

**R2: Frontmatter Validation Complexity**
- **Probability**: LOW (JSON schema is well-supported)
- **Impact**: MEDIUM (manual validation tedious)
- **Mitigation**: Research Phase 0.5 spike validates feasibility; ajv library handles JSON schema validation

**R3: Quiz Platform Embedding Issues (CORS, iframe security)**
- **Probability**: LOW (Google Forms widely embedded)
- **Impact**: MEDIUM (blocks User Story 8 - Assessments)
- **Mitigation**: Phase 0.5 spike tests embedding; multiple platform options (Google Forms, Quizlet, Microsoft Forms)

**R4: Code Example Testing CI/CD Complexity**
- **Probability**: MEDIUM (Docker in GitHub Actions can be slow)
- **Impact**: LOW (optional validation, not blocking)
- **Mitigation**: Cache Docker layers; run code tests only on code example changes (GitHub Actions path filters)

**R5: Performance Degradation with Large Content Volume**
- **Probability**: LOW (Docusaurus handles large sites well)
- **Impact**: MEDIUM (violates SC-016: build time < 5 minutes)
- **Mitigation**: Monitor build times; use Docusaurus caching; optimize images (WebP, compression)

---

## Success Criteria Mapping

**From spec.md Success Criteria section - all 20 criteria mapped to implementation**:

| Success Criterion | Phase | Validation Method |
|-------------------|-------|-------------------|
| **SC-001**: 90% students locate chapter in <30s | Phase 2.1, 2.7 | User testing, analytics heatmap |
| **SC-002**: Breadcrumbs on 100% pages | Phase 2.1 | Automated crawler check |
| **SC-003**: Zero broken links | All phases | CI/CD broken-link-checker |
| **SC-004**: 100% chapters have frontmatter | Phase 2.2 | JSON schema validation |
| **SC-005**: 100% code runs on Ubuntu 22.04 + Humble | Phase 2.3 | Docker CI/CD tests |
| **SC-006**: Diagrams render on desktop + mobile | Phase 2.4 | Manual testing (1920x1080, 375x667) |
| **SC-007**: 80% students achieve 70%+ on assessments | Phase 2.8 | Post-deployment survey |
| **SC-008**: Validation scripts provide pass/fail | Phase 2.5 | Manual testing of validation scripts |
| **SC-009**: 4.0+ satisfaction with clarity | Phase 2.2 | Post-module surveys |
| **SC-010**: Hardware guides for 3 tiers | Phase 2.6 | Manual review of hardware-guide.md |
| **SC-011**: 100% exercises have simulation fallback | Phase 2.5 | Manual review of exercises |
| **SC-012**: Cloud setup in <30min | Phase 2.6 | Pilot test on AWS g5.xlarge |
| **SC-013**: Search returns relevant in top 3 for 90% | Phase 2.7 | Manual testing of 20 common queries |
| **SC-014**: Glossary has 100% terms | Phase 2.9 | Manual review vs. chapters |
| **SC-015**: Glossary links to chapters | Phase 2.9 | Automated crawler check |
| **SC-016**: Build <5min with 0 warnings | All phases | CI/CD timing logs |
| **SC-017**: Deploy <5min after merge | Phase 2.10 | GitHub Actions timing logs |
| **SC-018**: Zero critical accessibility violations | All phases | axe DevTools audit in CI/CD |
| **SC-019**: Instructor guide has 100% solution keys | Phase 2.9 | Manual review |
| **SC-020**: Grading rubrics for all assessments | Phase 2.9 | Manual review |

---

## Next Steps

1. **Execute Phase 0 Research** ‚Üí Generate `research.md` with documented decisions
2. **(Optional) Execute Phase 0.5 Spikes** ‚Üí Validate critical unknowns (Algolia, quiz embeds, frontmatter validation)
3. **Execute Phase 1 Design** ‚Üí Generate `data-model.md`, `contracts/`, `quickstart.md`
4. **Run `/sp.tasks`** ‚Üí Convert Phase 2 high-level tasks into detailed, dependency-ordered task list
5. **Implement MVP (P1 User Stories)** ‚Üí Navigation, Prerequisites, Code Examples
6. **Deploy to GitHub Pages** ‚Üí Validate with beta students
7. **Iterate on P2/P3 Features** ‚Üí Diagrams, Exercises, Search, Assessments

---

**Plan Complete** ‚úÖ

This implementation plan is ready for task breakdown via `/sp.tasks` command.
